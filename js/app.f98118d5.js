(function(t){function e(e){for(var n,s,c=e[0],o=e[1],u=e[2],d=0,b=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&b.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);l&&l(e);while(b.length)b.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var o=a[c];0!==r[o]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/marikit_holding_vue/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"249a":function(t,e,a){},"29d5":function(t,e,a){},"2b42":function(t,e,a){"use strict";var n=a("249a"),r=a.n(n);r.a},"5c3d":function(t,e,a){t.exports=a.p+"img/spinner.00e1caa6.svg"},"66fa":function(t,e,a){"use strict";var n=a("e768"),r=a.n(n);r.a},"6a09":function(t,e,a){},"7faf":function(t,e,a){"use strict";var n=a("b8ff"),r=a.n(n);r.a},"87c3":function(t,e,a){"use strict";var n=a("6a09"),r=a.n(n);r.a},"9ee5":function(t,e,a){},a45c:function(t,e,a){"use strict";var n=a("9ee5"),r=a.n(n);r.a},b8ff:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("CatalogPage")],1)},i=[],s=a("d4ec"),c=a("99de"),o=a("7e84"),u=a("262e"),l=a("9ab4"),d=a("60a3"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CatalogPage"},[a("Basket"),a("Categories")],1)},f=[],_=a("bee2"),p="SET_CATEGORIES",v="SET_PRODUCTS",g="SET_EXCHANGE_RATES",y="ADD_TO_BASKET",m="REMOVE_FROM_BASKET",h="SET_QUANTITY",C="GET_CATEGORIES",O="GET_PRODUCTS",k="GET_EXCHANGE_RATES",j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"Categories"},[a("h2",[t._v("Категории с товарами")]),t.products.length?t._e():a("Loader"),t._l(t.categories,(function(t){return a("ProductCard",{key:t.id,attrs:{category:t}})}))],2)},T=[],B=a("2f62"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ProductCard",class:{_collapsed:t.isCollapsed}},[a("div",{staticClass:"ProductCard__title",on:{click:function(e){return t.toggleCollapsibleContent()}}},[t._v(" "+t._s(t.category.name)+" ")]),a("div",{staticClass:"ProductCard__content"},[a("table",{staticClass:"Table__table"},[a("thead",{staticClass:"Table__thead"},[a("tr",{staticClass:"Table__tr"},t._l(t.columns,(function(e){return a("th",{key:e.key,staticClass:"Table__th"},[t._v(" "+t._s(e.title)+" ")])})),0)]),a("tbody",{staticClass:"Table__tbody"},t._l(t.products,(function(e){return a("tr",{key:e.id,staticClass:"Table__tr"},[a("td",{staticClass:"Table__td"},[t._v(" "+t._s(e.name)+" ")]),a("td",{staticClass:"Table__td"},[t._v(" "+t._s(e.available-t.getQuantityFromBasketById(e.id))+" ")]),a("td",{staticClass:"Table__td"},[t._v(" "+t._s(t.getFormattedPrice(e.price))+" ")]),a("td",{staticClass:"Table__td"},[a("button",{staticClass:"Button _primary",attrs:{disabled:t.isDisabledAddButton(e.id,e.available)},on:{click:function(a){return t.addToBasket(e)}}},[t._v(" Добавить ")]),t.isShowDeleteButton(e.id)?a("button",{staticClass:"Button _danger",on:{click:function(a){return t.removeFromBasket(e.id)}}},[t._v(" Удалить ")]):t._e()])])})),0)]),t.products.length?t._e():a("div",{staticClass:"Table__table-placeholder"},[a("div",{staticClass:"Table__table-empty"},[t._v(" Нет товаров в категории ")])])])])},P=[],x=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.isCollapsed=!1,t.columns=[{title:"Название",dataIndex:"name",key:"name"},{title:"Доступно",dataIndex:"available",key:"available"},{title:"Цена",dataIndex:"price",key:"price"},{title:"Действия",dataIndex:"actions",key:"actions"}],t}return Object(u["a"])(e,t),Object(_["a"])(e,[{key:"toggleCollapsibleContent",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"addToBasket",value:function(t){this.$store.commit(y,t)}},{key:"removeFromBasket",value:function(t){this.$store.commit(m,t)}},{key:"products",get:function(){return this.category?this.$store.getters.getProductsByCategoryId(this.category.id):[]}}]),e}(d["b"]);x=l["a"]([Object(d["a"])({props:["category"],computed:Object(B["b"])(["isDisabledAddButton","isShowDeleteButton","getFormattedPrice","getQuantityFromBasketById"])})],x);var E=x,S=E,A=(a("87c3"),a("2877")),F=Object(A["a"])(S,I,P,!1,null,null,null),$=F.exports,R=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Loader"},[n("img",{staticClass:"Loader__img",attrs:{src:a("5c3d"),alt:"spinner"}})])}],q=function(t){function e(){return Object(s["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["b"]);q=l["a"]([Object(d["a"])({})],q);var D=q,G=D,U=(a("fbea"),Object(A["a"])(G,R,w,!1,null,null,null)),M=U.exports,Q=function(t){function e(){return Object(s["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["b"]);Q=l["a"]([Object(d["a"])({components:{ProductCard:$,Loader:M},computed:Object(B["b"])(["categories","products"])})],Q);var N=Q,L=N,H=(a("a45c"),Object(A["a"])(L,j,T,!1,null,null,null)),J=H.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"Basket"},[a("h2",[t._v("Корзина")]),a("div",{staticClass:"Table"},[a("table",{staticClass:"Table__table"},[a("thead",{staticClass:"Table__thead"},[a("tr",{staticClass:"Table__tr"},t._l(t.columns,(function(e){return a("th",{key:e.key,staticClass:"Table__th"},[t._v(" "+t._s(e.title)+" ")])})),0)]),a("tbody",{staticClass:"Table__tbody"},t._l(t.basket,(function(e){return a("tr",{key:e.id,staticClass:"Table__tr"},[a("td",{staticClass:"Table__td"},[t._v(" "+t._s(t.getCategoryAppropriateProductById(e.categoryId).name+". ")+" "+t._s(e.name)+" ")]),a("td",{staticClass:"Table__td"},[a("div",{staticClass:"Basket__control"},[a("input",{staticClass:"Basket__input-quantity",class:{_increased:t.isCurrencyIncreased,_decreased:!t.isCurrencyIncreased},attrs:{type:"number",min:"1",max:e.available},domProps:{value:e.quantity},on:{input:function(a){return t.setQuantity(e,a)}}}),a("span",{staticClass:"Basket__input-addon-text"},[t._v(" шт.")])]),e.quantity===e.available?a("div",{staticClass:"Basket__addon-warning"},[t._v(" Количество ограничено ")]):t._e()]),a("td",{staticClass:"Table__td"},[t._v(" "+t._s(t.getFormattedPrice(e.price))+" "),a("span",{staticClass:"Basket__input-addon-text"},[t._v(" / шт.")])]),a("td",{staticClass:"Table__td"},[a("button",{staticClass:"Button _danger",on:{click:function(a){return t.removeFromBasket(e.id)}}},[t._v(" Удалить ")])])])})),0),t.getTotalAmount?a("tfoot",{staticClass:"Table__tfoot"},[a("tr",{staticClass:"Table__tr"},[a("td",{staticClass:"Table__td",attrs:{colspan:"3"}}),a("td",{staticClass:"Table__td"},[t._v(" Общая стоимость: "+t._s(t.getFormattedTotalAmount)+" ")])])]):t._e()]),t.basket.length?t._e():a("div",{staticClass:"Table__table-placeholder"},[a("div",{staticClass:"Table__table-empty"},[t._v(" Нет товаров в корзине ")])])])])},V=[],X=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.columns=[{title:"Наименование товара и описание",dataIndex:"name",key:"name"},{title:"Количество",dataIndex:"quantity",key:"quantity"},{title:"Цена",dataIndex:"price",key:"price"},{title:"Действия",dataIndex:"actions",key:"actions"}],t}return Object(u["a"])(e,t),Object(_["a"])(e,[{key:"removeFromBasket",value:function(t){this.$store.commit(m,t)}},{key:"setQuantity",value:function(t,e){var a=parseInt(e.target.value);this.$store.commit(h,{product:t,newQuantity:a})}}]),e}(d["b"]);X=l["a"]([Object(d["a"])({computed:Object(B["b"])(["basket","isCurrencyIncreased","getTotalAmount","getFormattedTotalAmount","getFormattedPrice","getCategoryAppropriateProductById"])})],X);var Y=X,z=Y,W=(a("66fa"),Object(A["a"])(z,K,V,!1,null,null,null)),Z=W.exports,tt=15e3,et=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.interval=void 0,t}return Object(u["a"])(e,t),Object(_["a"])(e,[{key:"mounted",value:function(){var t=this;this.$store.dispatch(C),this.$store.subscribe((function(e){e.type===p&&(t.$store.dispatch(O),t.$store.dispatch(k),t.interval=setInterval((function(){t.$store.dispatch(O),t.$store.dispatch(k)}),tt))}))}},{key:"destroyed",value:function(){clearInterval(this.interval)}}]),e}(d["b"]);et=l["a"]([Object(d["a"])({components:{Categories:J,Basket:Z}})],et);var at=et,nt=at,rt=(a("2b42"),Object(A["a"])(nt,b,f,!1,null,null,null)),it=rt.exports,st=function(t){function e(){return Object(s["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),e}(d["b"]);st=l["a"]([Object(d["a"])({components:{CatalogPage:it}})],st);var ct=st,ot=ct,ut=(a("7faf"),Object(A["a"])(ot,r,i,!1,null,null,null)),lt=ut.exports,dt="USD",bt="RUB",ft=20,_t=80,pt={products:[],categories:[],basket:[],exchangeRates:{rates:{RUB:ft,USD:1},base:dt,isIncreased:!1}},vt=pt;a("4de4"),a("7db0"),a("13d5"),a("b680");function gt(t){return+t.toFixed(2)}a("ac1f"),a("5319");function yt(t){return t.toFixed(2).replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+String.fromCharCode(160))}function mt(t,e){return Math.floor(Math.random()*(e+1-t)+t)}a("d81d"),a("a9e3"),a("b64b");function ht(t){return t&&Object.keys(t).map((function(e){var a=Number(e);return{id:a,name:t[a].G}}))}function Ct(t,e){return t.Value.Goods.map((function(t){return{id:t.T,name:e[t.G].B[t.T].N,categoryId:t.G,price:t.C,available:t.P,quantity:0}}))}var Ot,kt,jt={categories:function(t){return t.categories},products:function(t){return t.products},basket:function(t){return t.basket},exchangeRates:function(t){return t.exchangeRates},isCurrencyIncreased:function(t){return t.exchangeRates.isIncreased},getConvertedPrice:function(t,e){return function(a){return gt(a*t.exchangeRates.rates[e.getCurrency])}},getCurrency:function(){return bt},getFormattedPrice:function(t,e){return function(t){return yt(e.getConvertedPrice(t))}},getProductsByCategoryId:function(t){return function(e){return t.products.filter((function(t){return t.categoryId===e}))}},getProductFromBasketById:function(t,e){return function(t){return e.basket.find((function(e){return e.id===t}))}},getCategoryAppropriateProductById:function(t,e){return function(t){return e.categories.find((function(e){return e.id===t}))}},getTotalAmount:function(t,e){return e.basket.reduce((function(t,e){return t+gt(e.price*e.quantity)}),0)},getFormattedTotalAmount:function(t,e){return e.getFormattedPrice(e.getTotalAmount)},getQuantityFromBasketById:function(t,e){return function(t){var a=e.getProductFromBasketById(t);return a?a.quantity:0}},isShowDeleteButton:function(t,e){return function(t){var a=e.getProductFromBasketById(t);return!!a}},isDisabledAddButton:function(t,e){return function(t,a){var n=e.getProductFromBasketById(t);return!(!n||n.quantity!==a)}}},Tt=jt,Bt=a("ade3"),It=a("bc3a"),Pt=a.n(It),xt="/marikit_holding_vue/",Et={getProducts:function(){return Pt.a.get("".concat(xt,"data.json"))},getCategories:function(){return Pt.a.get("".concat(xt,"names.json"))}},St=Et,At=[],Ft=(Ot={},Object(Bt["a"])(Ot,C,(function(t){var e=t.commit;St.getCategories().then((function(t){At=t.data,e(p,ht(At))}))})),Object(Bt["a"])(Ot,O,(function(t){var e=t.commit;St.getProducts().then((function(t){e(v,Ct(t.data,At))}))})),Object(Bt["a"])(Ot,k,(function(t){var e=t.commit,a=t.state,n=mt(ft,_t),r=n>a.exchangeRates.rates.RUB;e(g,{rates:{RUB:n,USD:1},base:dt,isIncreased:r})})),Ot),$t=Ft,Rt=(a("99af"),a("c740"),a("a434"),a("2909")),wt=(kt={},Object(Bt["a"])(kt,p,(function(t,e){var a;(a=t.categories).splice.apply(a,[0,t.categories.length].concat(Object(Rt["a"])(e)))})),Object(Bt["a"])(kt,v,(function(t,e){var a;(a=t.products).splice.apply(a,[0,t.products.length].concat(Object(Rt["a"])(e)))})),Object(Bt["a"])(kt,g,(function(t,e){t.exchangeRates=Object.assign({},e)})),Object(Bt["a"])(kt,y,(function(t,e){var a,n=t.basket.findIndex((function(t){return t.id===e.id})),r=-1!==n;if(!r&&e.available>0){var i=t.basket.push(e);a=t.basket[i-1],a.quantity=0}r&&(a=t.basket[n]),a&&a.available>0&&a.quantity<a.available&&(a.quantity+=1)})),Object(Bt["a"])(kt,m,(function(t,e){var a=t.basket.findIndex((function(t){return t.id===e}));t.basket.splice(a,1)})),Object(Bt["a"])(kt,h,(function(t,e){var a=e.product,n=e.newQuantity,r=t.basket.findIndex((function(t){return t.id===a.id})),i=t.basket[r];n>0&&i.available>0&&n<=i.available&&(i.quantity=n)})),kt),qt=wt;n["a"].use(B["a"]);var Dt=new B["a"].Store({state:vt,getters:Tt,actions:$t,mutations:qt});n["a"].config.productionTip=!1,new n["a"]({store:Dt,render:function(t){return t(lt)}}).$mount("#app")},e768:function(t,e,a){},fbea:function(t,e,a){"use strict";var n=a("29d5"),r=a.n(n);r.a}});
//# sourceMappingURL=app.f98118d5.js.map